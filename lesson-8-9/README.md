# ะกัััะบัััะฐ ะฟัะพัะบัั\

```
lesson-7/
โ
โโโ main.tf                  # ะะพะปะพะฒะฝะธะน ัะฐะนะป ะดะปั ะฟัะดะบะปััะตะฝะฝั ะผะพะดัะปัะฒ
โโโ backend.tf               # ะะฐะปะฐัััะฒะฐะฝะฝั ะฑะตะบะตะฝะดั ะดะปั ััะตะนััะฒ (S3 + DynamoDB
โโโ outputs.tf               # ะะฐะณะฐะปัะฝั ะฒะธะฒะพะดะธ ัะตัััััะฒ
โ
โโโ modules/                 # ะะฐัะฐะปะพะณ ะท ัััะผะฐ ะผะพะดัะปัะผะธ
โ   โโโ s3-backend/          # ะะพะดัะปั ะดะปั S3 ัะฐ DynamoDB
โ   โ   โโโ s3.tf            # ะกัะฒะพัะตะฝะฝั S3-ะฑะฐะบะตัะฐ
โ   โ   โโโ dynamodb.tf      # ะกัะฒะพัะตะฝะฝั DynamoDB
โ   โ   โโโ variables.tf     # ะะผัะฝะฝั ะดะปั S3
โ   โ   โโโ outputs.tf       # ะะธะฒะตะดะตะฝะฝั ัะฝัะพัะผะฐััั ะฟัะพ S3 ัะฐ DynamoDB
โ   โ
โ   โโโ vpc/                 # ะะพะดัะปั ะดะปั VPC
โ   โ   โโโ vpc.tf           # ะกัะฒะพัะตะฝะฝั VPC, ะฟัะดะผะตัะตะถ, Internet Gateway
โ   โ   โโโ routes.tf        # ะะฐะปะฐัััะฒะฐะฝะฝั ะผะฐัััััะธะทะฐััั
โ   โ   โโโ variables.tf     # ะะผัะฝะฝั ะดะปั VPC
โ   โ   โโโ outputs.tf
โ   โโโ ecr/                 # ะะพะดัะปั ะดะปั ECR
โ   โ   โโโ ecr.tf           # ะกัะฒะพัะตะฝะฝั ECR ัะตะฟะพะทะธัะพััั
โ   โ   โโโ variables.tf     # ะะผัะฝะฝั ะดะปั ECR
โ   โ   โโโ outputs.tf       # ะะธะฒะตะดะตะฝะฝั URL ัะตะฟะพะทะธัะพััั
โ   โ
โ   โโโ eks/                 # ะะพะดัะปั ะดะปั Kubernetes ะบะปะฐััะตัะฐ
โ   โ   โโโ eks.tf           # ะกัะฒะพัะตะฝะฝั ะบะปะฐััะตัะฐ
โ   โ   โโโ variables.tf     # ะะผัะฝะฝั ะดะปั EKS
โ   โ   โโโ outputs.tf       # ะะธะฒะตะดะตะฝะฝั ัะฝัะพัะผะฐััั ะฟัะพ ะบะปะฐััะตั
โ
โโโ charts/
โ   โโโ django-app/
โ       โโโ templates/
โ       โ   โโโ deployment.yaml
โ       โ   โโโ service.yaml
โ       โ   โโโ configmap.yaml
โ       โ   โโโ hpa.yaml
โ       โโโ Chart.yaml
โ       โโโ values.yaml     # ConfigMap ะทั ะทะผัะฝะฝะธะผะธ ัะตัะตะดะพะฒะธัะฐ

```

## ๐ ะะพะผะฐะฝะดะธ ะดะปั ะทะฐะฟััะบั

```bash
# 1. ะะฝัััะฐะปัะทะฐััั Terraform-ะฟัะพัะบัั
terraform init

# 2. ะะตัะตะฒััะบะฐ, ัะพ ะฑัะดะต ััะฒะพัะตะฝะพ
terraform plan

# 3. ะกัะฒะพัะตะฝะฝั ัะฝััะฐััััะบัััะธ
terraform apply

# 4.ะัั ะพะฑัะฐะทั ะฝะฐ ัะตัะฒะตั
aws ecr get-login-password --region us-west-2 | docker login --username AWS --password-stdin "ะะะะะกะ ะะ ะะะะ"

docker buildx build --platform linux/amd64 -t "ะะะะะกะ ะะ ะะะะ"/lesson-7-ecr:latest .

docker push "ะะะะะกะ ะะ ะะะะ"/lesson-7-ecr:latest

# 5.ะัะดะบะปััะตะฝะฝั ะดะพ ะฒะฐัะพะณะพ ะบะปะฐััะตัั

aws eks --region us-west-2 update-kubeconfig --name eks-cluster-demo

# 6.ะัะดะบะปััะตะฝะฝั ะดะพ ะฒะฐัะพะณะพ ะบะปะฐััะตัั

helm upgrade --install django-app ./charts/django-app

# ! ะะตัะตะฒััะบะฐ !
kubectl get pods -o wide
kubectl get svc
kubectl logs <pod-name>

# LAST. ะะธะดะฐะปะตะฝะฝั ะฒัััั ัะฝััะฐััััะบัััะธ
terraform destroy
```
